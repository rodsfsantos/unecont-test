<!-- Dashboard Page -->
<div class="p-8 fade-in">
    <!-- Filter Section -->
    <div class="mb-8">
        <div class="bg-white rounded-lg shadow p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">Filtros</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Período</label>
                    <select id="filter-period" 
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="month">Mês Atual</option>
                        <option value="quarter">Trimestre</option>
                        <option value="year">Ano</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Mês</label>
                    <select id="filter-month"
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="12">Dezembro 2025</option>
                        <option value="11">Novembro 2025</option>
                        <option value="10">Outubro 2025</option>
                    </select>
                </div>
                <div class="flex items-end">
                    <button class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium">
                        Aplicar Filtros
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Indicators Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8" id="indicators-grid">
        <!-- Total Emitido -->
        <div class="bg-white rounded-lg shadow p-6 hover:shadow-lg transition">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-gray-600 text-sm font-medium">Total Emitido</p>
                    <p class="text-3xl font-bold text-gray-900 mt-2">R$ <span id="total-emitted">125.500,00</span></p>
                </div>
                <div class="bg-blue-100 p-4 rounded-lg">
                    <i class="fas fa-money-bill-wave text-xl text-blue-600"></i>
                </div>
            </div>
            <p class="text-xs text-gray-500 mt-2">↑ 12% do mês anterior</p>
        </div>

        <!-- Total Vencido -->
        <div class="bg-white rounded-lg shadow p-6 hover:shadow-lg transition">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-gray-600 text-sm font-medium">Inadimplência</p>
                    <p class="text-3xl font-bold text-red-600 mt-2">R$ <span id="total-overdue">35.800,50</span></p>
                </div>
                <div class="bg-red-100 p-4 rounded-lg">
                    <i class="fas fa-exclamation-circle text-xl text-red-600"></i>
                </div>
            </div>
            <p class="text-xs text-red-600 mt-2">⚠ Requer atenção</p>
        </div>

        <!-- Total a Vencer -->
        <div class="bg-white rounded-lg shadow p-6 hover:shadow-lg transition">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-gray-600 text-sm font-medium">A Vencer</p>
                    <p class="text-3xl font-bold text-yellow-600 mt-2">R$ <span id="total-pending">28.900,75</span></p>
                </div>
                <div class="bg-yellow-100 p-4 rounded-lg">
                    <i class="fas fa-clock text-xl text-yellow-600"></i>
                </div>
            </div>
            <p class="text-xs text-yellow-600 mt-2">⏱ Próximo vencimento em 5 dias</p>
        </div>

        <!-- Total Pago -->
        <div class="bg-white rounded-lg shadow p-6 hover:shadow-lg transition">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-gray-600 text-sm font-medium">Total Pago</p>
                    <p class="text-3xl font-bold text-green-600 mt-2">R$ <span id="total-paid">60.799,75</span></p>
                </div>
                <div class="bg-green-100 p-4 rounded-lg">
                    <i class="fas fa-check-circle text-xl text-green-600"></i>
                </div>
            </div>
            <p class="text-xs text-green-600 mt-2">✓ 48,4% do total emitido</p>
        </div>
    </div>

    <!-- Charts Section -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Delinquency Chart -->
        <div class="bg-white rounded-lg shadow p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">Evolução da Inadimplência</h3>
            <div id="delinquency-chart" class="w-full"></div>
        </div>

        <!-- Revenue Chart -->
        <div class="bg-white rounded-lg shadow p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">Evolução da Receita Recebida</h3>
            <div id="revenue-chart" class="w-full"></div>
        </div>
    </div>
</div>

<script>
    function renderDashboardCharts() {
        // Destroy existing charts if they exist
        if (window.dashboardCharts.delinquency) {
            window.dashboardCharts.delinquency.destroy();
        }
        if (window.dashboardCharts.revenue) {
            window.dashboardCharts.revenue.destroy();
        }

        const chartData = window.mockData.chartData;

        // Delinquency Chart
        const delinquencyOptions = {
            series: [{
                name: 'Inadimplência (R$)',
                data: chartData.delinquency.values
            }],
            chart: {
                type: 'area',
                height: 300,
                sparkline: {
                    enabled: false
                },
                toolbar: {
                    show: false
                }
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                curve: 'smooth',
                width: 2,
                colors: ['#dc2626']
            },
            fill: {
                type: 'gradient',
                gradient: {
                    shadeIntensity: 1,
                    opacityFrom: 0.45,
                    opacityTo: 0.05,
                    stops: [20, 100, 100, 100],
                    colorStops: [
                        {
                            offset: 0,
                            color: '#dc2626',
                            opacity: 0.5
                        },
                        {
                            offset: 100,
                            color: '#dc2626',
                            opacity: 0.05
                        }
                    ]
                }
            },
            xaxis: {
                categories: chartData.delinquency.months,
                labels: {
                    style: {
                        fontSize: '12px',
                        fontFamily: 'inherit'
                    }
                }
            },
            yaxis: {
                labels: {
                    formatter: function(value) {
                        return 'R$ ' + (value / 1000).toFixed(0) + 'k';
                    },
                    style: {
                        fontSize: '12px',
                        fontFamily: 'inherit'
                    }
                }
            },
            colors: ['#dc2626'],
            markers: {
                size: 5,
                colors: '#dc2626',
                strokeColors: '#fff',
                strokeWidth: 2,
                hover: {
                    size: 7
                }
            },
            grid: {
                borderColor: '#e5e7eb',
                strokeDashArray: 3
            },
            tooltip: {
                theme: 'light',
                x: {
                    format: 'MMM'
                },
                y: {
                    formatter: function(value) {
                        return 'R$ ' + value.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
                    }
                }
            }
        };

        // Revenue Chart
        const revenueOptions = {
            series: [{
                name: 'Receita Recebida (R$)',
                data: chartData.revenue.values
            }],
            chart: {
                type: 'bar',
                height: 300,
                sparkline: {
                    enabled: false
                },
                toolbar: {
                    show: false
                }
            },
            dataLabels: {
                enabled: false
            },
            plotOptions: {
                bar: {
                    columnWidth: '60%',
                    borderRadius: 4,
                    dataLabels: {
                        position: 'top'
                    }
                }
            },
            xaxis: {
                categories: chartData.revenue.months,
                labels: {
                    style: {
                        fontSize: '12px',
                        fontFamily: 'inherit'
                    }
                }
            },
            yaxis: {
                labels: {
                    formatter: function(value) {
                        return 'R$ ' + (value / 1000).toFixed(0) + 'k';
                    },
                    style: {
                        fontSize: '12px',
                        fontFamily: 'inherit'
                    }
                }
            },
            colors: ['#3b82f6'],
            grid: {
                borderColor: '#e5e7eb',
                strokeDashArray: 3
            },
            tooltip: {
                theme: 'light',
                x: {
                    format: 'MMM'
                },
                y: {
                    formatter: function(value) {
                        return 'R$ ' + value.toLocaleString('pt-BR', { minimumFractionDigits: 2 });
                    }
                }
            }
        };

        // Create charts
        const delinquencyChart = document.getElementById('delinquency-chart');
        const revenueChart = document.getElementById('revenue-chart');

        if (delinquencyChart) {
            window.dashboardCharts.delinquency = new ApexCharts(delinquencyChart, delinquencyOptions);
            window.dashboardCharts.delinquency.render();
        }

        if (revenueChart) {
            window.dashboardCharts.revenue = new ApexCharts(revenueChart, revenueOptions);
            window.dashboardCharts.revenue.render();
        }
    }

    // Make function globally accessible
    window.renderDashboardCharts = renderDashboardCharts;
</script>
</div>


