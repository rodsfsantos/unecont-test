<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UneCont - Sistema de Gestão Financeira</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.45.1/apexcharts.min.js"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .sidebar-active {
            @apply bg-blue-700 text-white;
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-gray-900 text-white shadow-lg flex flex-col">
            <div class="p-6 border-b border-gray-700">
                <h1 class="text-2xl font-bold flex items-center gap-2">
                    <i class="fas fa-coins text-yellow-400"></i>
                    UneCont
                </h1>
                <p class="text-sm text-gray-400 mt-1">Sistema Financeiro</p>
            </div>

            <nav class="flex-1 px-4 py-6 space-y-2">
                <a href="#" 
                   hx-get="/pages/dashboard.html"
                   hx-target="#main-content"
                   hx-swap="innerHTML swap:0.3s"
                   class="nav-link sidebar-active block px-4 py-3 rounded-lg font-medium transition hover:bg-blue-700"
                   onclick="setActiveNav(this)">
                    <i class="fas fa-chart-line inline mr-3"></i>
                    Dashboard
                </a>
                <a href="#"
                   hx-get="/pages/list_nf.html"
                   hx-target="#main-content"
                   hx-swap="innerHTML swap:0.3s"
                   class="nav-link block px-4 py-3 rounded-lg font-medium text-gray-300 transition hover:bg-gray-700 hover:text-white"
                   onclick="setActiveNav(this)">
                    <i class="fas fa-file-invoice inline mr-3"></i>
                    Notas Fiscais
                </a>
            </nav>

            <div class="p-4 border-t border-gray-700">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center font-bold text-white">
                        <i class="fas fa-user"></i>
                    </div>
                    <div>
                        <p class="font-medium text-sm">Rodrigo</p>
                        <p class="text-gray-400 text-xs">Admin</p>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="bg-white shadow-sm border-b border-gray-200">
                <div class="px-8 py-4 flex items-center justify-between">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900" id="page-title">Dashboard</h2>
                        <p class="text-gray-600 text-sm mt-1" id="page-subtitle">Visão geral do seu sistema financeiro</p>
                    </div>
                    <div class="flex items-center gap-4">
                        <button class="p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition">
                            <i class="fas fa-bell text-lg"></i>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <div id="main-content" class="flex-1 overflow-auto fade-in">
                <!-- Dashboard padrão será carregado aqui -->
                <div class="p-8">
                    <p class="text-gray-500">Carregando...</p>
                </div>
            </div>
        </main>
    </div>

    <script>
        function setActiveNav(element) {
            document.querySelectorAll('.nav-link').forEach(el => {
                el.classList.remove('sidebar-active');
                el.classList.add('text-gray-300', 'hover:bg-gray-700');
            });
            element.classList.add('sidebar-active');
            element.classList.remove('text-gray-300', 'hover:bg-gray-700');
        }

        // Mock data for the application
        window.mockData = {
            indicators: {
                totalEmitted: 125500.00,
                totalOverdue: 35800.50,
                totalPending: 28900.75,
                totalPaid: 60799.75
            },
            invoices: [
                {
                    id: 'NF001',
                    payer: 'Empresa ABC Ltda',
                    issueDate: '2025-12-15',
                    chargeDate: '2025-12-20',
                    paymentDate: '2025-12-28',
                    amount: 5500.00,
                    status: 'Pagamento realizado',
                    invoiceDoc: 'NF-2025-001',
                    boletoDoc: 'BOL-2025-001'
                },
                {
                    id: 'NF002',
                    payer: 'Tech Solutions Inc',
                    issueDate: '2025-12-10',
                    chargeDate: '2025-12-15',
                    paymentDate: null,
                    amount: 8900.50,
                    status: 'Pagamento em atraso',
                    invoiceDoc: 'NF-2025-002',
                    boletoDoc: 'BOL-2025-002'
                },
                {
                    id: 'NF003',
                    payer: 'Comércio XYZ Ltda',
                    issueDate: '2025-12-20',
                    chargeDate: '2025-12-25',
                    paymentDate: null,
                    amount: 3200.00,
                    status: 'Cobrança realizada',
                    invoiceDoc: 'NF-2025-003',
                    boletoDoc: 'BOL-2025-003'
                },
                {
                    id: 'NF004',
                    payer: 'Indústria Forte S.A',
                    issueDate: '2025-12-05',
                    chargeDate: '2025-12-10',
                    paymentDate: '2025-12-12',
                    amount: 12300.00,
                    status: 'Pagamento realizado',
                    invoiceDoc: 'NF-2025-004',
                    boletoDoc: 'BOL-2025-004'
                },
                {
                    id: 'NF005',
                    payer: 'Consultoria Pro',
                    issueDate: '2025-11-15',
                    chargeDate: '2025-11-20',
                    paymentDate: null,
                    amount: 6700.25,
                    status: 'Pagamento em atraso',
                    invoiceDoc: 'NF-2025-005',
                    boletoDoc: 'BOL-2025-005'
                },
                {
                    id: 'NF006',
                    payer: 'Logística Global',
                    issueDate: '2025-12-25',
                    chargeDate: '2025-12-30',
                    paymentDate: null,
                    amount: 9450.00,
                    status: 'Emitida',
                    invoiceDoc: 'NF-2025-006',
                    boletoDoc: 'BOL-2025-006'
                }
            ],
            chartData: {
                delinquency: {
                    months: ['Out', 'Nov', 'Dez'],
                    values: [15200, 22500, 35800]
                },
                revenue: {
                    months: ['Out', 'Nov', 'Dez'],
                    values: [42000, 51500, 60800]
                }
            }
        };

    <script>
        // Global chart instances
        window.dashboardCharts = {
            delinquency: null,
            revenue: null
        };

        // Load dashboard on page load
        document.addEventListener('DOMContentLoaded', function() {
            const mainContent = document.getElementById('main-content');
            
            // Load dashboard content
            const xhr = new XMLHttpRequest();
            xhr.open('GET', '/pages/dashboard.html', true);
            xhr.onload = function() {
                if (xhr.status === 200) {
                    mainContent.innerHTML = xhr.responseText;
                }
            };
            xhr.send();
        });

        // Listen for HTMX navigation
        document.addEventListener('htmx:afterSettle', function(evt) {
            if (evt.detail.target.id === 'main-content') {
                // Content loaded via HTMX
            }
        });
    </script>
    </script>
</body>
</html>
